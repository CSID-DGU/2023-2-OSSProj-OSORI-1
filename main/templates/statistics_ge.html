{% extends 'reference.html' %}

{% block content %}

<!-- ì²˜ìŒ íƒ€ì´í‹€ -->
<div class="gray_sec">
    <div class="container">
        <div style="font-size:4rem;">
            <i class="fas fa-graduation-cap"></i>
        </div>
        <div class="big_title">ê¿€êµì–‘ ì°¾ê¸°</div>
        <div class="small_title">ì‚¬ìš©ì í†µê³„ë¥¼ í†µí•´ ê¿€êµì–‘ì„ ì°¾ì•„ë³´ì!</div>
    </div>
</div>

<div class="white_sec">

    <!-- ì„¤ëª… ë°•ìŠ¤ -->
    <div class="statistics_user_box" style='margin-top: 4rem;'>
        <div class='statistics_user_sub'>
            í•„í„°ë§ì„ í†µí•´ ë‹¤ë¥¸ ì‚¬ìš©ìë“¤ì´ ë§ì´ ë“£ëŠ” êµì–‘ ê°•ì˜ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”!
        </div>
    </div>

    <div class="custom_box_wrap">
        <!-- ê²€ìƒ‰ì°½ ë°•ìŠ¤ -->
        <div>
            <div class="my_box_grade">
                <!-- í•„í„°ë§ ë°•ìŠ¤ -->
                <div style="padding:2.5rem 2.5rem 0 2.5rem">
                    <!-- ìƒë‹¨ ì œëª© -->
                    <div class='filter_title'>
                        ğŸ“Œ í•„í„°ë§
                    </div>
                    <!-- êµ¬ë¶„ ë°•ìŠ¤ë“¤ -->
                    <div class="filter_wrap">
                        <form method="post" id='filter_form' name='filter_form'>
                            <!-- ë‚´ë¶€ ë°•ìŠ¤ -->
                            <div class='filter_select_wrap'>
                                
                                <!-- í•™ì  ë°•ìŠ¤ -->
                                <div class='filter_select_div'>
                                    <div class='filter_select_title'>í•™ì </div>
                                    <div class='filter_select_box'>
                                        <div class='filter_select_chk'>
                                            <!--
                                            <label>
                                                <input type="checkbox" name="grade[]" value="0.5" id="grade_half" checked> 
                                                <label for="grade_half"></label>
                                                &nbsp;0.5 í•™ì 
                                            </label>
                                            <br>-->
                                            <label>
                                                <input type="checkbox" name="grade[]" value="1" id="grade_1" checked> 
                                                <label for="grade_1"></label>
                                                &nbsp;1 í•™ì 
                                            </label>
                                            <br>
                                            <label>
                                                <input type="checkbox" name="grade[]" value="2" id="grade_2" checked> 
                                                <label for="grade_2"></label>
                                                &nbsp;2 í•™ì 
                                            </label>
                                            <br>
                                            <label>
                                                <input type="checkbox" name="grade[]" value="3" id="grade_3" checked> 
                                                <label for="grade_3"></label>
                                                &nbsp;3 í•™ì 
                                            </label>
                                            
                                        </div>
                                    </div>
                                </div>

                                <!-- ì„ íƒì˜ì—­ ë°•ìŠ¤ -->
                                <div class='filter_select_div'>
                                    <div class='filter_select_title'>ì„ íƒì˜ì—­</div>
                                    <div class='filter_select_box' style="width:20rem;">
                                        <div class="filter_select_chk_wrap">
                                            <div id='selection_box' class='filter_select_chk'>
                                                <label>
                                                    <input type="checkbox" name="selection[]" value="ê³µí†µêµì–‘" id="ê³µí†µêµì–‘" checked>
                                                    <label for="ê³µí†µêµì–‘"></label>
                                                    &nbsp;ê³µí†µêµì–‘
                                                </label>
                                                <br>
                                                <label>
                                                    <input type="checkbox" name="selection[]" value="ì¼ë°˜êµì–‘" id="ì¼ë°˜êµì–‘" checked>
                                                    <label for="ì¼ë°˜êµì–‘"></label>
                                                    &nbsp;ì¼ë°˜êµì–‘
                                                </label>
                                                <br>
                                                <label>
                                                    <input type="checkbox" name="selection[]" value="í•™ë¬¸ê¸°ì´ˆ" id="í•™ë¬¸ê¸°ì´ˆ" checked>
                                                    <label for="í•™ë¬¸ê¸°ì´ˆ"></label>
                                                    &nbsp;í•™ë¬¸ê¸°ì´ˆ
                                                </label>                      
                                            </div>

                                        </div>
                                        
                                    </div>
                                </div>
                            </div>
                            <!-- ê²€ìƒ‰ë²„íŠ¼-->
                            <input class='filter_btn' type="button" value="ê²€ìƒ‰í•˜ê¸°" onclick="ajax_get_data(); return false">
                        </form>
                    </div>

                    <!-- ê²°ê³¼ ë°•ìŠ¤ -->
                    <div style="margin-top:5rem;">
                        <div class="filter_title">
                            <div style="display: flex; align-items: center;">
                                <input class='filter_btn' type="button" value="ì¥ë°”êµ¬ë‹ˆ" id="selectButton">
                                <div style="margin: 0 auto;">ğŸ“œ êµì–‘ ìˆœìœ„</div>
                            </div>
                        </div>
                        <hr>
                        <!-- ì—¬ê¸°ì— í…Œì´ë¸”ì´ ì±„ì›Œì§-->
                        <div id='update_div'></div>
                        <br><br>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}



{% block js_section %}
<script>

    ajax_get_data();

    function ajax_get_data() {

        var formData = $("#filter_form").serialize();

        let update_div = document.getElementById('update_div');
        html = "<div class='loading_wrap'><div class='circle'></div> ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</div>"
        update_div.innerHTML = html;

        $.ajax(
            {
                type: 'POST',
                url: '/a_statistics_ge/',
                // ë³´ë‚´ëŠ” ë°ì´í„°
                data: formData,
                // ì„±ê³µì‹œ ë°›ëŠ” ë°ì´í„°
                success: function (context) {
                    let zip_lecture_count = context['zip_lecture_count']

                    html = "<table class='grade_table' style='margin-top:0'>";
                    html += "<tr>";
                    html += "<th class='grade_table_th' style='width:5%'>ì„ íƒ</th>"
                    html += "<th class='grade_table_th' style='width:12%'>í•™ìˆ˜ë²ˆí˜¸</th>"
                    html += "<th class='grade_table_th' style='width:38%'>ê³¼ëª©ëª…</th>"
                    html += "<th class='grade_table_th' style='width:13%'>ì´ìˆ˜êµ¬ë¶„</th>"
                    html += "<th class='grade_table_th' style='width:13%'>ì´ìˆ˜êµ¬ë¶„ì˜ì—­</th>"
                    html += "<th class='grade_table_th' style='width:12%'>ë‹´ë‹¹êµì›</th>"
                    html += "<th class='grade_table_th' style='width:8%'>í•™ì </th>"
                    html += "<th class='grade_table_th' style='width:12%; border-right :0px'>ë‹´ì€íšŸìˆ˜</th>"
                    html += "</tr>";
                    for (let i = 0; i < zip_lecture_count.length; i++) {
                        lecture_info = zip_lecture_count[i]
                        html += "<tr>";
                        html += "<td class='grade_table_td'>";
                        html += "<input type='checkbox' name='ck' value='" + lecture_info.subject_num + "' id='checkbox_" + lecture_info.subject_num + "'>";
                        html += "<label for='checkbox_" + lecture_info.subject_num + "'></label>"; // ë¼ë²¨ê³¼ ì²´í¬ë°•ìŠ¤ë¥¼ ì—°ê²°í•˜ëŠ” for ì†ì„± ì¶”ê°€
                        html += "</td>";
                        html += "<td class='grade_table_td'>" + lecture_info.subject_num + "</td>";
                        html += "<td class='grade_table_td'>" + lecture_info.subject_name + "</td>";
                        html += "<td class='grade_table_td'>" + lecture_info.classification + "</td>";
                        html += "<td class='grade_table_td'>" + lecture_info.classification_ge + "</td>";
                        html += "<td class='grade_table_td'>" + lecture_info.professor + "</td>";
                        html += "<td class='grade_table_td'>" + lecture_info.subject_credit + "</td>";
                        html += "<td class='grade_table_td' style='border-right :0px;'><span style='font-weight:bold; color:#17a55e;'>" + lecture_info.sum_stu + "</span>íšŒ</td>";
                        html += "</tr>";
                    }
                    html += "</table>";


                    update_div.innerHTML = html;
                },
                // ì—ëŸ¬ì‹œ ì„¤ì •
                error: function (err) { 
                    console.log(err)
                    alert('ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤!');
                }
            }
        );
    }

</script>

{% endblock %}